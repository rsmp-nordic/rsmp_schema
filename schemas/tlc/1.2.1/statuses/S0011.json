{
  "$schema" : "https://json-schema.org/draft/2020-12/schema",
  "description" : "Yellow flash.\nThe controller shows yellow flash.\nYellow flash may be used during a serious fault (depending on configuration) or maintenance work. It can also be manually set using M0001.\nSome countries may use yellow flash as an normal operating mode, and not necessarily during fault.\nPlease note that all values in this status uses comma-separated lists - one value for each intersection, e.g. \"1,2\" and \"True,False\"",
  "properties" : {
    "n" : {
      "enum" : [
        "intersection",
        "source",
        "status"
      ]
    }
  },
  "dependentSchemas" : {
    "n" : {
      "properties" : {
        "n" : {
          "enum" : [
            "intersection",
            "source",
            "status"
          ]
        }
      },
      "allOf" : [
        {
          "if" : {
            "properties" : {
              "n" : {
                "const" : "intersection"
              }
            },
            "not" : {
              "properties" : {
                "q" : {
                  "enum" : [
                    "undefined",
                    "unknown"
                  ]
                }
              }
            }
          },
          "then" : {
            "properties" : {
              "s" : {
                "description" : "Comma separated list of intersections which the status relates to, e.g. \"1,2\".\nUse \"0\" for all intersections of the TLC.",
                "$ref" : "../../../core/3.1.2/definitions.json#/integer_list"
              }
            }
          }
        },
        {
          "if" : {
            "properties" : {
              "n" : {
                "const" : "status"
              }
            },
            "not" : {
              "properties" : {
                "q" : {
                  "enum" : [
                    "undefined",
                    "unknown"
                  ]
                }
              }
            }
          },
          "then" : {
            "properties" : {
              "s" : {
                "description" : "False: Yellow flash disabled\nTrue: Yellow flash enabled",
                "$ref" : "../../../core/3.1.2/definitions.json#/boolean_list"
              }
            }
          }
        },
        {
          "if" : {
            "properties" : {
              "n" : {
                "const" : "source"
              }
            },
            "not" : {
              "properties" : {
                "q" : {
                  "enum" : [
                    "undefined",
                    "unknown"
                  ]
                }
              }
            }
          },
          "then" : {
            "properties" : {
              "s" : {
                "description" : "Source of the status change",
                "$ref" : "../../../core/3.1.2/definitions.json#/string_list",
                "pattern" : "(?-mix:^(operator_panel|calendar_clock|control_block|forced|startup|other)(?:,(operator_panel|calendar_clock|control_block|forced|startup|other))*$)"
              }
            }
          }
        }
      ]
    }
  }
}
